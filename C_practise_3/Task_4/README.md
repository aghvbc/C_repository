# Задание 4


nm file1.o 
                 U global_var
0000000000000000 T main
                 U printf
                 U print_from_file1
                 U print_from_file2

❯ nm file2.o 
                 U global_var
                 U printf
0000000000000000 T print_from_file2
                 U static_var

❯ nm main.o
                 U global_var
0000000000000000 T main
                 U printf
                 U print_from_file1
                 U print_from_file2

Благодаря команде nm можно увидеть, что static переменная доступна только внутри файла в котором создана, а благодаря extern можно использовать переменную объявленную в другом файле.


Объявление одной и той же глобальной переменной(global_var) в разных файлах вызывает ошибку линковки.

# Работа функций:

# nm:
функция nm показывает:показывает таблицу символов, таких как: глобальные (D), локальные (d), функции (T) и неопределенные (U) символы. 

функции и глобальные переменные являются неопределёнными в выводе nm, так как они определятся во время линковки.

чтобы переменная не была неопределенна(U) ей надо явно(зависит от расположения переменной) присвоить значение например int global_var = 30;

# objdump: 
функция objdump используется для отображения информации о объектных и используемых файлах.

-t:
Показывает записи таблицы символов файла. Похоже на информацию, предоставленную программой NM.

-x:
позволяет вывести все заголовки и секции файла



# strings:

функция strings показывает строки в бинарном файле.

строки из strings program видны:

file1.c -> global_var = %d
file1.c -> static_var = %d
file2.c -> global_var = %d
main.c -> global_var = %d


# сегменты:

в .text находятся функции файлов.

в .bss находятся неинициализированные глобальные и static переменные, таких нет в этих файлах поэтому .bss вообще не показывается в выводе objdump.

в .data хранит инициализированные глобальные и static.


#  Из что посмотреть:

откуда начинается программа:

start address 0x0000000000001040 - адрес с которого начинается выполнение main функции.

у static компиляции start address 0x0000000000402ce0 так как с начала выполняется динамическая линковка.

используемые библиотеки:

У обычной компиляции программа зависит от внешних библиотек, а статическая не имеет внешних зависимостей, поэтому статическая программа гораздо больше обычной.

# Дополнительный вопрос:

переменная static_var не отображается в таблице символов у main.o и file2.o(в file1.o она есть) потому что это  static переменная и она не передаётся другим файлам.